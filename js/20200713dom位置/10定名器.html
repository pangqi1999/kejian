<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .box {
        width: 200px;
        height: 70px;
        border-radius: 10px;
        border: 1px solid #ccc;
        text-align: center;
        line-height: 70px;
        font-size: 18px;
        font-weight: 900;
      }
    </style>
  </head>
  <body>
    <div class="box">开始点名</div>
    <button id="start">开始</button>
    <button id="stop">暂停</button>
    <script>
      var names = [
        "丁龙非",
        "季禹龙",
        "唐依林",
        "陈顺",
        "李宇鑫",
        "周超",
        "刘浩",
        "刘玉才",
        "顾坤",
        "王宇航",
        "苟永贞",
        "安素心",
        "尧云峰",
        "吕建成",
        "韩建丽",
      ];
      var box = document.querySelector(".box");
      var strat = document.querySelector("#start");
      var stop = document.querySelector("#stop");
      var timer;
      var flag = true; // 开关 防抖
      strat.onclick = function () {
        // 用户多次点击开始 以第一次为主
        if (flag) {
          // 多次点击 保证timer 只是赋值一次
          timer = setInterval(function () {
            var random = Math.floor(Math.random() * names.length);
            box.innerHTML = names[random];
          }, 10);
        }
        console.log(timer);
        flag = false;
      };

      stop.onclick = function () {
        console.log(timer);
        clearInterval(timer);
        flag = true;
      };

      // bug 点击多次不能清楚timer

      // 网络性能优化
      // 防抖 截流
      // 防抖：多次点击按钮以第一次为主  -----> timer  触底 ...
      // 截流：多次点击按钮以最后一次为主  ---> 购物车计数器

      

    </script>
  </body>
</html>
